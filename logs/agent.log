INFO:     Will watch for changes in these directories: ['/home/lucas/anton_new']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [86029] using WatchFiles
Traceback (most recent call last):
  File "/home/lucas/.local/bin/uvicorn", line 8, in <module>
    sys.exit(main())
  File "/home/lucas/.local/lib/python3.10/site-packages/click/core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
  File "/home/lucas/.local/lib/python3.10/site-packages/click/core.py", line 1363, in main
    rv = self.invoke(ctx)
  File "/home/lucas/.local/lib/python3.10/site-packages/click/core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home/lucas/.local/lib/python3.10/site-packages/click/core.py", line 794, in invoke
    return callback(*args, **kwargs)
  File "/home/lucas/.local/lib/python3.10/site-packages/uvicorn/main.py", line 413, in main
    run(
  File "/home/lucas/.local/lib/python3.10/site-packages/uvicorn/main.py", line 575, in run
    ChangeReload(config, target=server.run, sockets=[sock]).run()
  File "/home/lucas/.local/lib/python3.10/site-packages/uvicorn/supervisors/basereload.py", line 53, in run
    for changes in self:
  File "/home/lucas/.local/lib/python3.10/site-packages/uvicorn/supervisors/basereload.py", line 72, in __next__
    return self.should_restart()
  File "/home/lucas/.local/lib/python3.10/site-packages/uvicorn/supervisors/watchfilesreload.py", line 81, in should_restart
    changes = next(self.watcher)
  File "/home/lucas/.local/lib/python3.10/site-packages/watchfiles/main.py", line 118, in watch
    with RustNotify(
PermissionError: Permission denied (os error 13) about ["/home/lucas/anton_new/pgdata"]
2025-08-13 08:35:50,652 - server.agent.code_indexer - INFO - Loaded metadata for 70 previously indexed files
INFO:     Started server process [86033]
INFO:     Waiting for application startup.
2025-08-13 08:35:50,652 - server.agent.agent_server - INFO - 🚀 Agent Server starting up...
2025-08-13 08:35:50,652 - server.agent.agent_server - INFO - Starting code indexing...
2025-08-13 08:35:50,652 - server.agent.agent_server - INFO - ✅ NVML Initialized for GPU monitoring.
INFO:     Application startup complete.
2025-08-13 08:35:50,656 - server.agent.agent_server - INFO - ✅ Code indexing complete. 0 files indexed.
2025-08-13 08:35:50,656 - server.agent.rag_manager - INFO - Saving knowledge base with 506 entries to disk...
2025-08-13 08:35:50,657 - server.agent.rag_manager - INFO - Knowledge base saved successfully.
2025-08-13 08:35:59,631 - server.agent.agent_server - INFO - Agent Server received request. Processing with three-memory ReAct agent...
2025-08-13 08:35:59,633 - server.agent.react_agent - INFO - ReActAgent initialized with token budget: 8192
🔧 Wrapped legacy tool: execute_python_code
🔧 Wrapped legacy tool: write_file
🔧 Wrapped legacy tool: read_file
🔧 Wrapped legacy tool: list_directory
🔧 Wrapped legacy tool: web_search
✅ Enhanced ToolManager initialized.
🔍 Discovering tools...
⚠️  Warning: Failed to instantiate LegacyToolWrapper from legacy_wrapper.py: LegacyToolWrapper.__init__() missing 1 required positional argument: 'legacy_tool_instance'
⚠️  Warning: Failed to load tools from expand_content.py: Can't instantiate abstract class ExpandContentTool with abstract methods get_function_schema, get_metadata, run
🔧 Discovered tool: rebuild_code_index from rebuild_index_tool.py
🔧 Discovered tool: web_search from web_search.py
🔧 Discovered tool: get_codebase_stats from code_stats.py
🔧 Discovered tool: list_directory from file_management.py
🔧 Discovered tool: read_file from file_management.py
🔧 Discovered tool: write_file from file_management.py
🔧 Discovered tool: create_pull_request from git.py
🔧 Discovered tool: git_commit from git.py
🔧 Discovered tool: git_create_branch from git.py
🔧 Discovered tool: git_push from git.py
🔧 Discovered tool: git_status from git.py
🔧 Discovered tool: git_switch_branch from git.py
🔧 Discovered tool: check_learning_progress from learning_tools.py
🔧 Discovered tool: execute_python_code from coding.py
🔧 Discovered tool: search_codebase from code_search.py
🔧 Tool 'rebuild_code_index' registered.
🔧 Tool 'web_search' registered.
🔧 Tool 'get_codebase_stats' registered.
🔧 Tool 'list_directory' registered.
🔧 Tool 'read_file' registered.
🔧 Tool 'write_file' registered.
🔧 Tool 'create_pull_request' registered.
🔧 Tool 'git_commit' registered.
🔧 Tool 'git_create_branch' registered.
🔧 Tool 'git_push' registered.
🔧 Tool 'git_status' registered.
🔧 Tool 'git_switch_branch' registered.
🔧 Tool 'check_learning_progress' registered.
🔧 Tool 'execute_python_code' registered.
🔧 Tool 'search_codebase' registered.
✅ Tool discovery complete. 15 tools registered.
🔧 Wrapped legacy tool: create_new_tool
🔧 Wrapped git tool: git_status
🔧 Wrapped git tool: git_commit
🔧 Wrapped git tool: git_push
🔧 Wrapped git tool: create_pull_request
🔧 Wrapped git tool: git_create_branch
🔧 Wrapped git tool: git_switch_branch
⚠️  Warning: Failed to instantiate LegacyToolWrapper from legacy_wrapper.py: LegacyToolWrapper.__init__() missing 1 required positional argument: 'legacy_tool_instance'
⚠️  Warning: Failed to load tools from expand_content.py: Can't instantiate abstract class ExpandContentTool with abstract methods get_function_schema, get_metadata, run
🔧 Discovered tool: rebuild_code_index from rebuild_index_tool.py
🔧 Discovered tool: web_search from web_search.py
🔧 Discovered tool: get_codebase_stats from code_stats.py
🔧 Discovered tool: list_directory from file_management.py
🔧 Discovered tool: read_file from file_management.py
🔧 Discovered tool: write_file from file_management.py
🔧 Discovered tool: create_pull_request from git.py
🔧 Discovered tool: git_commit from git.py
🔧 Discovered tool: git_create_branch from git.py
🔧 Discovered tool: git_push from git.py
🔧 Discovered tool: git_status from git.py
🔧 Discovered tool: git_switch_branch from git.py
🔧 Discovered tool: check_learning_progress from learning_tools.py
🔧 Discovered tool: execute_python_code from coding.py
🔧 Discovered tool: search_codebase from code_search.py
INFO:     192.168.1.250:45650 - "POST /v1/agent/chat HTTP/1.1" 200 OK
2025-08-13 08:35:59,636 - server.agent.agent_server - INFO - Starting ReAct agent with three-memory system...
2025-08-13 08:35:59,636 - server.agent.learning_loop - INFO - Learning loop tracking started for task: okay anton here is what i want. i want you to have...
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 223.02it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 623.32it/s]
2025-08-13 08:35:59,648 - server.agent.agent_server - INFO - Token usage: 643/8192 (7.8%)
2025-08-13 08:35:59,648 - server.agent.agent_server - INFO - ReAct iteration 1/30
2025-08-13 08:35:59,699 - httpx - INFO - HTTP Request: POST http://localhost:8000/v1/chat/stream "HTTP/1.1 200 OK"
2025-08-13 08:36:11,196 - server.agent.agent_server - WARNING - Thinking block exceeded budget: 938/409
2025-08-13 08:36:11,553 - server.agent.agent_server - INFO - Detected tool calls:
[{'name': 'web_search', 'arguments': {'query': 'Apple Calendar API CalDAV Python library implementation'}, 'raw_content': '{"name": "web_search", "arguments": {"query": "Apple Calendar API CalDAV Python library implementation"}}'}]
2025-08-13 08:36:11,553 - server.agent.agent_server - INFO - Executing 1 tool call...
2025-08-13 08:36:11,553 - server.agent.agent_server - INFO - Executing tool 'web_search' with args: {'query': 'Apple Calendar API CalDAV Python library implementation'}
/home/lucas/anton_new/server/agent/tools/web_search.py:31: RuntimeWarning: This package (`duckduckgo_search`) has been renamed to `ddgs`! Use `pip install ddgs` instead.
  with DDGS() as ddgs:
2025-08-13 08:36:11,866 - primp - INFO - response: https://www.bing.com/search?q=Apple+Calendar+API+CalDAV+Python+library+implementation 200
2025-08-13 08:36:13,279 - server.agent.agent_server - INFO - Tool web_search completed successfully
2025-08-13 08:36:13,279 - server.agent.agent_server - INFO - ReAct iteration 2/30
2025-08-13 08:36:13,310 - httpx - INFO - HTTP Request: POST http://localhost:8000/v1/chat/stream "HTTP/1.1 200 OK"
2025-08-13 08:36:13,474 - server.agent.agent_server - INFO - Detected tool calls:
[]
2025-08-13 08:36:13,474 - server.agent.agent_server - INFO - ReAct iteration 3/30
2025-08-13 08:36:13,505 - httpx - INFO - HTTP Request: POST http://localhost:8000/v1/chat/stream "HTTP/1.1 200 OK"
2025-08-13 08:36:29,256 - server.agent.agent_server - INFO - Detected tool calls:
[]
2025-08-13 08:36:29,256 - server.agent.learning_loop - INFO - Task completed (success: False)
2025-08-13 08:36:29,257 - server.agent.agent_server - INFO - --- AGENT SERVER REQUEST METRICS ---
2025-08-13 08:36:29,258 - server.agent.agent_server - INFO - [Latency] Full Request End-to-End: 29.62 seconds
2025-08-13 08:36:29,258 - server.agent.agent_server - INFO - [Throughput] Chunks per Second: 87.40
2025-08-13 08:36:29,258 - server.agent.agent_server - INFO - [Throughput] Total Chunks Streamed: 2589
2025-08-13 08:36:29,258 - server.agent.agent_server - INFO - [Resources] Start - CPU: 4.4%, RAM: 10.3%, Util: GPU0:4.0%, GPU1:0.0%, VRAM: GPU0:4.2%, GPU1:2.1%
2025-08-13 08:36:29,258 - server.agent.agent_server - INFO - [Resources] End   - CPU: 6.6%, RAM: 11.1%, Util: GPU0:93.0%, GPU1:0.0%, VRAM: GPU0:79.7%, GPU1:2.1%
2025-08-13 08:36:29,258 - server.agent.agent_server - INFO - [Resources] Difference- CPU: +2.2%, RAM: +0.8%, Util: GPU0:+89.0%, GPU1:+0.0%, VRAM: GPU0:+75.5%, GPU1:+0.0%
2025-08-13 08:36:29,258 - server.agent.agent_server - INFO - ------------------------------------
2025-08-13 08:36:56,584 - server.agent.agent_server - INFO - Agent Server received request. Processing with three-memory ReAct agent...
2025-08-13 08:36:56,584 - server.agent.react_agent - INFO - ReActAgent initialized with token budget: 8192
INFO:     192.168.1.250:58842 - "POST /v1/agent/chat HTTP/1.1" 200 OK
2025-08-13 08:36:56,586 - server.agent.agent_server - INFO - Starting ReAct agent with three-memory system...
2025-08-13 08:36:56,586 - server.agent.learning_loop - INFO - Learning loop tracking started for task: proceed with step 1...
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 67.15it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 757.37it/s]
2025-08-13 08:36:56,605 - server.agent.agent_server - INFO - Token usage: 1017/8192 (12.4%)
2025-08-13 08:36:56,605 - server.agent.agent_server - INFO - ReAct iteration 1/30
2025-08-13 08:36:56,644 - httpx - INFO - HTTP Request: POST http://localhost:8000/v1/chat/stream "HTTP/1.1 200 OK"
2025-08-13 08:37:09,097 - server.agent.agent_server - WARNING - Thinking block exceeded budget: 1466/409
2025-08-13 08:37:10,112 - server.agent.agent_server - INFO - Detected tool calls:
[]
2025-08-13 08:37:10,112 - server.agent.learning_loop - INFO - Task completed (success: True)
2025-08-13 08:37:10,112 - server.agent.learning_loop - INFO - Queueing asynchronous capability analysis
2025-08-13 08:37:10,114 - server.agent.agent_server - INFO - --- AGENT SERVER REQUEST METRICS ---
2025-08-13 08:37:10,114 - server.agent.agent_server - INFO - [Latency] Full Request End-to-End: 13.53 seconds
2025-08-13 08:37:10,114 - server.agent.agent_server - INFO - [Throughput] Chunks per Second: 105.85
2025-08-13 08:37:10,114 - server.agent.agent_server - INFO - [Throughput] Total Chunks Streamed: 1432
2025-08-13 08:37:10,114 - server.agent.agent_server - INFO - [Resources] Start - CPU: 0.7%, RAM: 11.1%, Util: GPU0:17.0%, GPU1:0.0%, VRAM: GPU0:79.7%, GPU1:2.1%
2025-08-13 08:37:10,114 - server.agent.agent_server - INFO - [Resources] End   - CPU: 6.9%, RAM: 11.1%, Util: GPU0:93.0%, GPU1:0.0%, VRAM: GPU0:79.7%, GPU1:2.1%
2025-08-13 08:37:10,114 - server.agent.agent_server - INFO - [Resources] Difference- CPU: +6.2%, RAM: +0.0%, Util: GPU0:+76.0%, GPU1:+0.0%, VRAM: GPU0:+0.0%, GPU1:+0.0%
2025-08-13 08:37:10,114 - server.agent.agent_server - INFO - ------------------------------------
2025-08-13 08:37:10,114 - server.agent.learning_loop - INFO - Analyzing capabilities for task: proceed with step 1...
2025-08-13 08:37:10,144 - httpx - INFO - HTTP Request: POST http://localhost:8000/v1/chat/stream "HTTP/1.1 200 OK"
